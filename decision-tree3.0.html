<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solutions Bank Assessment</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>

    .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
    }

    .section {
        display: none;
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .section.active {
        display: block;
    }

    .section-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        padding: 15px;
        border-radius: 8px;
    }

    .section-icon {
        width: 24px;
        height: 24px;
        margin-right: 12px;
        background: #1976d2;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
    }

    h1, h2, h3 {
        color: #262626;
        margin-bottom: 15px;
    }

    h1 {
        font-size: 2rem;
        text-align: center;
        margin-bottom: 30px;
    }

    .question-text {
        font-size: 1.1rem;
        margin-bottom: 20px;
        color: #555;
    }

    .textarea-large {
        width: 100%;
        min-height: 120px;
        padding: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1rem;
        resize: vertical;
        background: #f8fffe;
    }

    .textarea-large:focus {
        outline: none;
        border-color: #1976d2;
        background: white;
    }

    .pathway-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 30px 0;
    }

    .pathway-card {
        padding: 25px;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        cursor: pointer;
        text-align: center;
        transition: all 0.3s ease;
        background: white;
    }

    .pathway-card:hover {
        border-color: #1976d2;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(25,118,210,0.1);
    }

    .pathway-card.selected {
        border-color: #1976d2;
        background: #e3f2fd;
    }

    .pathway-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }

    .btn {
        background: #2a66aa;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.3s ease;
        margin: 10px 5px;
      font-weight: 800;
    }

    .btn:hover {
        background: #1565c0;
    }

    .btn-secondary {
        background: #6c757d;
    }

    .btn-secondary:hover {
        background: #5a6268;
    }

    .checkbox-group {
        margin: 20px 0;
    }

    .checkbox-item {
        display: flex;
        align-items: center;
        margin: 12px 0;
        padding: 12px;
        border-radius: 8px;
        transition: background 0.2s ease;
    }

    .checkbox-item:hover {
        background: #f5f5f5;
    }

    .checkbox-item input[type="checkbox"] {
        margin-right: 12px;
        transform: scale(1.2);
    }

    .challenge-grid {
        display: grid;
        gap: 15px;
        margin: 20px 0;
    }

    .challenge-card {
        padding: 20px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
    }

    .challenge-card:hover {
        border-color: #1976d2;
        background: #f8f9ff;
    }

    .challenge-card.selected {
        border-color: #1976d2;
        background: #e3f2fd;
    }

    .challenge-sections {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin: 20px 0;
    }

    .challenge-section {
        padding: 20px;
        border: 2px dashed #d1c4e9;
        border-radius: 12px;
        min-height: 300px;
    }

    .solutions-grid {
        display: grid;
        gap: 15px;
        margin: 20px 0;
    }

    .solution-card {
        padding: 20px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
    }

    .solution-card:hover {
        border-color: #1976d2;
        background: #f8f9ff;
    }

    .solution-card.selected {
        border-color: #1976d2;
        background: #e3f2fd;
    }

    .solution-icon {
        margin-right: 15px;
        font-size: 1.5rem;
    }

    .analysis-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
    }

    .analysis-table th,
    .analysis-table td {
        padding: 15px;
        text-align: left;
        border: 1px solid #e0e0e0;
    }

    .analysis-table th {
        background: #f5f5f5;
        font-weight: 600;
    }

    .analysis-table input {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .timeline-item {
        display: flex;
        align-items: center;
        margin: 15px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #1976d2;
    }

    .timeline-number {
        background: #1976d2;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-weight: bold;
    }

    .progress-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        border-radius: 4px;
        margin: 20px 0;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: #c4e5dc;
        transition: width 0.3s ease;
    }

    .selected-solutions {
        background: #c4e5dc;
        padding: 20px;
        border-radius: 8px;
      border: 2px solid #e0e0e0;
        margin: 20px 0;
    }

    .solution-tag {
        display: inline-block;
        background: #e1f5fe;
        color: #262626;
        padding: 15px;
        border-radius: 8px;
        margin: 5px;
        font-size: 0.9rem;
    }

    .complete-section {
        text-align: center;
        padding: 40px 20px;
    }

    .complete-icon {
        font-size: 4rem;
        color: #4caf50;
        margin-bottom: 20px;
    }

    .priority-solution {
        border-left: 4px solid #ff9800;
        background: #fff3e0;
    }

    .solution-option {
        padding: 15px;
        margin: 10px 0;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .solution-option:hover {
        border-color: #1976d2;
        background: #f8f9ff;
    }

    .solution-option.selected {
        border-color: #1976d2;
        background: #e3f2fd;
    }

    .solution-option.priority {
        border-color: #ff9800;
        background: #fff3e0;
    }

    .solution-option.priority.selected {
        border-color: #f57c00;
        background: #ffcc02;
    }

    @media (max-width: 768px) {
        .pathway-options {
            grid-template-columns: 1fr;
        }
        
        .challenge-sections {
            grid-template-columns: 1fr;
        }
        
        .container {
            padding: 10px;
        }
    }
</style>
</head>
<body>
<div class="container">
    <h1>Collaboration with Parents/Families</h1>
    
    <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
    </div>

    <!-- Section 1: Welcome -->
    <div class="section active" id="section-welcome">
        <div class="section-header">
            <h2>Collaboration with parents/families</h2>
        </div>
        
        <div class="question-text">
            First, take a moment to think through what would be ideal for your collaboration with parents and families. How would you like it to look?
        </div>
        
        <textarea class="textarea-large" id="visionText" placeholder="Describe your vision for ideal collaboration with families..."></textarea>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn" onclick="nextSection()">Continue</button>
        </div>
    </div>

    <!-- Section 2: Choose Pathway -->
    <div class="section" id="section-pathways">
        <h2>Choose Your Assessment Approach</h2>
      <p>
        Click on the one you prefer. You can always go back and try the other route as well!
      </p>
        
        <div class="pathway-options">
            <div class="pathway-card" onclick="selectPathway('worksheet')" id="pathway-worksheet">
                <div class="pathway-icon">üìã</div>
                <h3>Option 1: Worksheet</h3>
                <p>Complete a structured assessment with specific questions and analysis</p>
            </div>
            
            <div class="pathway-card" onclick="selectPathway('challenges')" id="pathway-challenges">
                <div class="pathway-icon">üéØ</div>
                <h3>Option 2: Select Challenges</h3>
                <p>Choose from common challenges and explore tailored solutions</p>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-secondary" onclick="goBack()" style="margin-right: 10px;">‚Üê Back</button>
            <button class="btn" onclick="proceedWithPathway()" id="pathwayBtn" disabled>Continue with Selected Option</button>
        </div>
    </div>

    <!-- Section 3: Worksheet Path -->
    <div class="section" id="section-worksheet">
        <div class="section-header">
            <h2>Assessment Worksheet</h2>
        </div>
        
        <h3>Which of the following areas do you need assistance in to build the most effective family relationships?</h3>
        
        <div class="checkbox-group">
            <div class="checkbox-item">
                <input type="checkbox" id="cb1" value="Language, cultural, or value differences">
                <label for="cb1">Language, cultural, or value differences</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="cb2" value="School communication procedures">
                <label for="cb2">School communication procedures</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="cb3" value="Communication channel">
                <label for="cb3">Communication channel (e.g., email, Class Dojo)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="cb4" value="Time constraints">
                <label for="cb4">Time constraints (e.g., how often you contact parents, when you contact them)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="cb5" value="Parent availability">
                <label for="cb5">Parent availability to meetings</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="cb6" value="Other">
                <label for="cb6">Other</label>
            </div>
        </div>

        <div id="tableSection" style="display: none;">
            <h3>For any areas you checked off above, please complete the table below:</h3>
            
            <table class="analysis-table">
                <thead>
                    <tr>
                        <th>Area of Concern</th>
                        <th>What I Currently Do</th>
                        <th>What Would be Ideal</th>
                        <th>What is the Gap</th>
                    </tr>
                </thead>
                <tbody id="analysisTableBody">
                    <!-- Rows will be added dynamically -->
                </tbody>
            </table>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-secondary" onclick="goBack()" style="margin-right: 10px;">‚Üê Back</button>
            <button class="btn" onclick="completeWorksheet()">Complete Worksheet</button>
        </div>
    </div>

    <!-- Section 4: Challenges Path -->
    <div class="section" id="section-challenges">
        <div class="section-header">
            <h2>Option 2: Select challenges</h2>
        </div>
        
        <p class="question-text">Select the challenge that best describes your situation:</p>
        
        <div class="challenge-grid">
            <div class="challenge-card" onclick="selectChallenge('language')" data-challenge="language">
                My students' families speak a different language than me or seem to have different values (e.g., it feels as though we are not on the "same page" when it comes to what their child needs)
            </div>
            <div class="challenge-card" onclick="selectChallenge('procedures')" data-challenge="procedures">
                School communication procedures add to my workload (e.g., required communication logs, conferences, or required frequency of communication)
            </div>
            <div class="challenge-card" onclick="selectChallenge('contact')" data-challenge="contact">
                I have a hard time successfully getting in contact with families (e.g., conflicting work schedules, unreturned forms)
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-secondary" onclick="goBack()" style="margin-right: 10px;">‚Üê Back</button>
            <button class="btn" onclick="proceedWithChallenge()" id="challengeBtn" disabled>Continue with Selected Challenge</button>
        </div>
    </div>

    <!-- Section 5: Challenge Solutions -->
    <div class="section" id="section-challenge-solutions">
        <div class="section-header">
            <h2 id="challengeTitle">Challenge Solutions</h2>
        </div>
        
        <p class="question-text">Select the solutions that apply to your situation. You can select multiple options. Solutions marked with a star (‚≠ê) are highly recommended for your specific challenge.</p>
        
        <div class="challenge-sections">
            <div class="challenge-section">
                <h3>Available Solutions</h3>
                <div id="challengeOptions">
                    <!-- Options will be populated based on selected challenge -->
                </div>
            </div>
            
            <div class="challenge-section">
                <h3>Selected Solutions</h3>
                <div id="selectedChanges">
                    <p style="color: #999; font-style: italic;">No solutions selected yet. Click on solutions on the left to see them here.</p>
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-secondary" onclick="goBack()" style="margin-right: 10px;">‚Üê Back</button>
            <button class="btn" onclick="showSolutionsBank()">Continue to Solutions Bank</button>
        </div>
    </div>

    <!-- Section 6: Solutions Bank -->
    <div class="section" id="section-solutions">
        <div class="section-header">
            <h2>Solutions Bank</h2>
        </div>
        
        <p class="question-text">Based on your responses, here are recommended solutions for your areas of concern. Select the solutions that would be most helpful for your situation:</p>
        
        <div class="solutions-grid">
            <div class="solution-card" onclick="toggleSolution('streamlined')" data-solution="streamlined">
                <div class="solution-icon">‚≠ê</div>
                <div>
                    <h4>Streamlined Communication Procedures</h4>
                    <p>Establish clear, consistent communication protocols that are easy for parents to understand and follow</p>
                </div>
            </div>
            
            <div class="solution-card" onclick="toggleSolution('comprehensive')" data-solution="comprehensive">
                <div class="solution-icon">üìñ</div>
                <div>
                    <h4>Comprehensive Parent Communication Guide</h4>
                    <p>Create a detailed handbook outlining all communication channels, expectations, and procedures</p>
                </div>
            </div>
            
            <div class="solution-card" onclick="toggleSolution('multicultural')" data-solution="multicultural">
                <div class="solution-icon">üåç</div>
                <div>
                    <h4>Multi-cultural Communication Strategies</h4>
                    <p>Develop culturally responsive communication approaches for diverse family backgrounds</p>
                </div>
            </div>
            
            <div class="solution-card" onclick="toggleSolution('translation')" data-solution="translation">
                <div class="solution-icon">üó£Ô∏è</div>
                <div>
                    <h4>Translation Tools and Resources</h4>
                    <p>Implement translation services and multilingual communication materials</p>
                </div>
            </div>
            
            <div class="solution-card" onclick="toggleSolution('alternative')" data-solution="alternative">
                <div class="solution-icon">üì±</div>
                <div>
                    <h4>Alternative Contact Methods</h4>
                    <p>Establish multiple communication channels to reach families effectively</p>
                </div>
            </div>
        </div>
        
        <div class="selected-solutions" id="selectedSolutionsDisplay">
            <h4>Selected Solutions (0)</h4>
            <div id="solutionTags"></div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-secondary" onclick="goBack()" style="margin-right: 10px;">‚Üê Back</button>
            <button class="btn" onclick="generateResults()" id="generateBtn" disabled>Continue with Selected Solutions</button>
        </div>
    </div>

    <!-- Section 7: Results -->
    <div class="section" id="section-results">
        <div class="complete-section">
            <div class="complete-icon">‚úÖ</div>
            <h2>Assessment Complete</h2>
            <p>Thank you for completing the assessment. Below is a comprehensive summary of your responses and recommendations.</p>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Your Vision for Ideal Collaboration</h3>
            <div id="displayVision" style="background: #e1f5fe; padding: 15px; border-radius: 8px; margin: 10px 0;"></div>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Your Selected Challenge-Specific Solutions</h3>
            <div id="displayChallengeSolutions"></div>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Your Comprehensive Solution Guide</h3>
            <div id="displaySolutions"></div>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Your Personalized Solution Overview</h3>
            <p>Based on your assessment, we've identified <span id="solutionCount">0</span> key areas for improvement. This comprehensive guide provides detailed implementation strategies, timelines, and resources tailored to your specific challenges.</p>
            
            <div id="implementationTimeline">
                <h4>üóìÔ∏è Implementation Timeline</h4>
                <div class="timeline-item">
                    <div class="timeline-number">1</div>
                    <div>
                        <strong>Week 1-2: Communication Preferences Survey</strong><br>
                        Survey families to understand preferred communication methods
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-number">2</div>
                    <div>
                        <strong>Week 3-4: Platform Setup</strong><br>
                        Set up various communication platforms and tools
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-number">3</div>
                    <div>
                        <strong>Month 2: Training & Onboarding</strong><br>
                        Train staff and families on new communication options
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-number">4</div>
                    <div>
                        <strong>Month 3+: Multi-Channel Implementation</strong><br>
                        Implement diverse communication channels
                    </div>
                </div>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 20px 0;">
                <h4>üìö Resources & Tools</h4>
                <p>Access implementation guides, templates, and best practices for your selected solutions.</p>
            </div>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Recommended Next Steps</h3>
            <ol style="margin-left: 20px;">
                <li>Review your selected solutions and prioritize them based on your immediate needs and available resources.</li>
                <li>Create an implementation timeline for each solution, starting with the most critical areas.</li>
                <li>Share this assessment with your team or colleagues to ensure alignment and support.</li>
                <li>Schedule regular check-ins to monitor progress and adjust strategies as needed.</li>
            </ol>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn" onclick="exportResults()">üìä Export Answers</button>
            <button class="btn btn-secondary" onclick="startOver()">üîÑ Start Over</button>
        </div>
    </div>
</div>

<script>
    let currentSection = 0;
    let selectedPathway = '';
    let selectedChallenge = '';
    let selectedSolutions = [];
    let selectedChallengeChanges = [];
    
    const sections = [
        'section-welcome',
        'section-pathways', 
        'section-worksheet',
        'section-challenges',
        'section-challenge-solutions',
        'section-solutions',
        'section-results'
    ];

    const challengeData = {
        language: {
            title: "My students' families speak a different language than me or seem to have different values",
            solutions: [
                {
                    text: "Can school support in building rapport be changed (e.g., getting to know parents' via admin-administered surveys, school-led events with childcare/food)",
                    priority: true
                },
                {
                    text: "Can you change your communication procedures (e.g., can other people send announcements, use automation features, etc.)?",
                    priority: true
                },
                {
                    text: "Can admin/district support you in obtaining PLO?",
                    priority: false
                },
                {
                    text: "Can admin/district support bringing in relevant PLO?",
                    priority: false
                }
            ]
        },
        procedures: {
            title: "School communication procedures add to my workload",
            solutions: [
                {
                    text: "Can school procedures for conferences/parent communication be streamlined or changed (e.g., change in paperwork, required frequency, coverage for conferences, etc.)",
                    priority: true
                },
                {
                    text: "Can you change your communication procedures (e.g., can other people send announcements, use automation features, etc.)?",
                    priority: true
                },
                {
                    text: "Can schedules be changed so you have more planning time, with skilled student supervision?",
                    priority: false
                },
                {
                    text: "Can other people fulfill some of the tasks you have during this time?",
                    priority: false
                },
                {
                    text: "Can schedules be changed so you have more uninterrupted time with collaborators?",
                    priority: false
                },
                {
                    text: "Can extra responsibilities be delegated to other personnel?",
                    priority: false
                },
                {
                    text: "Can time be \"given back\" or stipends given for core responsibilities you have to make-up due to extra responsibilities?",
                    priority: false
                }
            ]
        },
        contact: {
            title: "I have a hard time successfully getting in contact with families",
            solutions: [
                {
                    text: "Can school support in building rapport be changed (e.g., getting to know parents' via admin-administered surveys, school-led events with childcare/food)",
                    priority: true
                },
                {
                    text: "Can school procedures for conferences/parent communication be streamlined or changed (e.g., change in paperwork, required frequency, coverage for conferences, etc.)",
                    priority: true
                },
                {
                    text: "Can you change your communication procedures (e.g., can other people send announcements, use automation features, etc.)?",
                    priority: true
                },
                {
                    text: "Can schedules be changed so you have more planning time, with skilled student supervision?",
                    priority: false
                },
                {
                    text: "Can other people fulfill some of the tasks you have during this time?",
                    priority: false
                },
                {
                    text: "Would other resources reduce time these tasks take? (e.g., curricular resources, data tools)",
                    priority: false
                },
                {
                    text: "Can you be paid a stipend for time outside of contractual hours?",
                    priority: false
                },
                {
                    text: "Can extra responsibilities be delegated to other personnel?",
                    priority: false
                }
            ]
        }
    };

    function updateProgress() {
        const progress = ((currentSection + 1) / sections.length) * 100;
        $('#progressBar').css('width', progress + '%');
    }

    function goBack() {
        if (currentSection > 0) {
            // Handle special navigation cases
            if (sections[currentSection] === 'section-worksheet' || sections[currentSection] === 'section-challenges') {
                // Both worksheet and challenges go back to pathways
                currentSection = 1;
                showSection('section-pathways');
            } else if (sections[currentSection] === 'section-challenge-solutions') {
                // Challenge solutions goes back to challenges
                currentSection = 3;
                showSection('section-challenges');
            } else if (sections[currentSection] === 'section-solutions') {
                // Solutions bank needs to check which path was taken
                if (selectedPathway === 'worksheet') {
                    currentSection = 2;
                    showSection('section-worksheet');
                } else if (selectedChallenge) {
                    currentSection = 4;
                    showSection('section-challenge-solutions');
                } else {
                    currentSection = 3;
                    showSection('section-challenges');
                }
            } else {
                // Default: go to previous section
                currentSection--;
                showSection(sections[currentSection]);
            }
        }
    }

    function showSection(sectionId) {
        $('.section').removeClass('active');
        $('#' + sectionId).addClass('active');
        updateProgress();
        $('html, body').animate({scrollTop: 0}, 300);
    }

    function nextSection() {
        if (currentSection < sections.length - 1) {
            currentSection++;
            showSection(sections[currentSection]);
        }
    }

    function selectPathway(pathway) {
        selectedPathway = pathway;
        $('.pathway-card').removeClass('selected');
        $('#pathway-' + pathway).addClass('selected');
        $('#pathwayBtn').prop('disabled', false);
    }

    function proceedWithPathway() {
        if (selectedPathway === 'worksheet') {
            currentSection = 2;
            showSection('section-worksheet');
            setupWorksheetTable();
        } else if (selectedPathway === 'challenges') {
            currentSection = 3;
            showSection('section-challenges');
        }
    }

    function setupWorksheetTable() {
        // Monitor checkbox changes to update table
        $('.checkbox-group input[type="checkbox"]').on('change', function() {
            updateAnalysisTable();
            toggleTableVisibility();
        });
    }

    function toggleTableVisibility() {
        const checkedBoxes = $('.checkbox-group input[type="checkbox"]:checked').length;
        if (checkedBoxes > 0) {
            $('#tableSection').slideDown();
        } else {
            $('#tableSection').slideUp();
        }
    }

    function updateAnalysisTable() {
        const tableBody = $('#analysisTableBody');
        tableBody.empty();
        
        $('.checkbox-group input[type="checkbox"]:checked').each(function() {
            const concern = $(this).val();
            const row = `
                <tr>
                    <td><strong>${concern}</strong></td>
                    <td><input type="text" placeholder="Describe what you currently do..."></td>
                    <td><input type="text" placeholder="Describe what would be ideal..."></td>
                    <td><input type="text" placeholder="Describe the gap between current and ideal..."></td>
                </tr>
            `;
            tableBody.append(row);
        });
    }

    function completeWorksheet() {
        currentSection = 5;
        showSection('section-solutions');
    }

    function selectChallenge(challenge) {
        selectedChallenge = challenge;
        $('.challenge-card').removeClass('selected');
        $('[data-challenge="' + challenge + '"]').addClass('selected');
        $('#challengeBtn').prop('disabled', false);
    }

    function proceedWithChallenge() {
        if (selectedChallenge && challengeData[selectedChallenge]) {
            currentSection = 4;
            showSection('section-challenge-solutions');
            setupChallengeOptions();
        }
    }

    function setupChallengeOptions() {
        const data = challengeData[selectedChallenge];
        $('#challengeTitle').text(data.title);
        
        const optionsHtml = data.solutions.map((solution, index) => {
            const priorityClass = solution.priority ? 'priority' : '';
            const priorityIcon = solution.priority ? '‚≠ê ' : '';
            return `
                <div class="solution-option ${priorityClass}" onclick="toggleChallengeChange(${index})" data-change="${index}">
                    <div style="display: flex; align-items: flex-start;">
                        <span style="font-size: 1.2rem; margin-right: 10px; flex-shrink: 0;">${priorityIcon}</span>
                        <span>${solution.text}</span>
                    </div>
                </div>
            `;
        }).join('');
        
        $('#challengeOptions').html(optionsHtml);
    }

    function toggleChallengeChange(index) {
        const changeCard = $(`[data-change="${index}"]`);
        
        if (changeCard.hasClass('selected')) {
            changeCard.removeClass('selected');
            selectedChallengeChanges = selectedChallengeChanges.filter(i => i !== index);
        } else {
            changeCard.addClass('selected');
            selectedChallengeChanges.push(index);
        }
        
        updateSelectedChallengeChanges();
    }

    function updateSelectedChallengeChanges() {
        const data = challengeData[selectedChallenge];
        let changesHtml = '';
        
        if (selectedChallengeChanges.length > 0) {
            changesHtml = selectedChallengeChanges.map(index => {
                const solution = data.solutions[index];
                const priorityClass = solution.priority ? 'priority-solution' : '';
                const priorityIcon = solution.priority ? '‚≠ê ' : '';
                return `
                    <div style="background: white; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;" class="${priorityClass}">
                        <strong>${priorityIcon}Selected Solution:</strong><br>
                        ${solution.text}
                    </div>
                `;
            }).join('');
        } else {
            changesHtml = '<p style="color: #999; font-style: italic;">No solutions selected yet. Click on solutions on the left to see them here.</p>';
        }
        
        $('#selectedChanges').html(changesHtml);
    }

    function showSolutionsBank() {
        currentSection = 5;
        showSection('section-solutions');
    }

    function toggleSolution(solutionId) {
        const solutionCard = $(`[data-solution="${solutionId}"]`);
        
        if (solutionCard.hasClass('selected')) {
            solutionCard.removeClass('selected');
            selectedSolutions = selectedSolutions.filter(s => s !== solutionId);
        } else {
            solutionCard.addClass('selected');
            selectedSolutions.push(solutionId);
        }
        
        updateSelectedSolutions();
    }

    function updateSelectedSolutions() {
        const solutionDetails = {
            'streamlined': 'Streamlined Communication Procedures',
            'comprehensive': 'Comprehensive Parent Communication Guide',
            'multicultural': 'Multi-cultural Communication Strategies',
            'translation': 'Translation Tools and Resources',
            'alternative': 'Alternative Contact Methods'
        };
        
        let displayHtml = '';
        
        if (selectedSolutions.length === 0) {
            displayHtml = '<p style="color: #999; font-style: italic;">No solutions selected yet. Click on solutions above to add them here.</p>';
        } else {
            displayHtml = selectedSolutions.map(id => {
                const solutionName = solutionDetails[id];
                return `<div class="solution-tag" style="display: inline-block; margin: 5px; background: #e3f2fd; color: #1976d2; padding: 10px 15px; border-radius: 20px; border: 1px solid #1976d2;">‚≠ê ${solutionName}</div>`;
            }).join('');
        }
        
        $('#solutionTags').html(displayHtml);
        $('#selectedSolutionsDisplay h4').html(`Selected Solutions (${selectedSolutions.length})`);
        $('#generateBtn').prop('disabled', selectedSolutions.length === 0);
    }


    function generateResults() {
        currentSection = 6;
        showSection('section-results');
        
        // Populate results
        $('#displayVision').text($('#visionText').val() || 'No vision provided');
        $('#solutionCount').text(selectedSolutions.length);
        
        // Display challenge-specific solutions
        let challengeSolutionsHtml = '';
        if (selectedChallenge && selectedChallengeChanges.length > 0) {
            const data = challengeData[selectedChallenge];
            challengeSolutionsHtml = `
                <h4>Challenge: ${data.title}</h4>
                ${selectedChallengeChanges.map(index => {
                    const solution = data.solutions[index];
                    const priorityIcon = solution.priority ? '‚≠ê ' : '';
                    return `<div class="solution-tag" style="display: block; margin: 5px 0;">${priorityIcon}${solution.text}</div>`;
                }).join('')}
            `;
        } else {
            challengeSolutionsHtml = '<p>No challenge-specific solutions selected</p>';
        }
        $('#displayChallengeSolutions').html(challengeSolutionsHtml);
        
        const solutionNames = {
            'streamlined': 'Streamlined Communication Procedures',
            'comprehensive': 'Comprehensive Parent Communication Guide', 
            'multicultural': 'Multi-cultural Communication Strategies',
            'translation': 'Translation Tools and Resources',
            'alternative': 'Alternative Contact Methods'
        };
        
        const solutionsHtml = selectedSolutions.map(id => 
            `<div class="solution-tag" style="display: block; margin: 5px 0;">${solutionNames[id]}</div>`
        ).join('');
        
        $('#displaySolutions').html(solutionsHtml || '<p>No solutions selected</p>');
    }

    function exportResults() {
        // Placeholder function for export functionality
        alert('Export functionality would be implemented here. This would generate a PDF or document with all the user\'s responses and recommendations.');
    }

    function startOver() {
        // Reset all data
        currentSection = 0;
        selectedPathway = '';
        selectedChallenge = '';
        selectedSolutions = [];
        selectedChallengeChanges = [];
        
        // Reset form elements
        $('#visionText').val('');
        $('.pathway-card').removeClass('selected');
        $('.challenge-card').removeClass('selected');
        $('.solution-card').removeClass('selected');
        $('.solution-option').removeClass('selected');
        $('.checkbox-group input[type="checkbox"]').prop('checked', false);
        $('#analysisTableBody').empty();
        
        // Show first section
        showSection('section-welcome');
    }

    // Initialize
    $(document).ready(function() {
        updateProgress();
    });
</script>
</body>
</html>